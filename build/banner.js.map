{"version":3,"file":"banner.js","mappings":"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","sources":["webpack://fictional-university-theme/external window [\"wp\",\"apiFetch\"]","webpack://fictional-university-theme/external window [\"wp\",\"blockEditor\"]","webpack://fictional-university-theme/external window [\"wp\",\"blocks\"]","webpack://fictional-university-theme/external window [\"wp\",\"components\"]","webpack://fictional-university-theme/external window [\"wp\",\"element\"]","webpack://fictional-university-theme/webpack/bootstrap","webpack://fictional-university-theme/webpack/runtime/compat get default export","webpack://fictional-university-theme/webpack/runtime/define property getters","webpack://fictional-university-theme/webpack/runtime/hasOwnProperty shorthand","webpack://fictional-university-theme/webpack/runtime/make namespace object","webpack://fictional-university-theme/./our-blocks/banner.js"],"sourcesContent":["module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import apiFetch from \"@wordpress/api-fetch\"\r\nimport { Button, PanelBody, PanelRow } from \"@wordpress/components\"\r\nimport { InnerBlocks, InspectorControls, MediaUpload, MediaUploadCheck } from \"@wordpress/block-editor\"\r\nimport { registerBlockType } from \"@wordpress/blocks\" // instead of writing wp.blocks.registerBlockType, we are importing it instead.\r\nimport { useEffect } from \"@wordpress/element\"\r\n\r\nregisterBlockType(\"ourblocktheme/banner\", {\r\n  title: \"Banner\",\r\n  supports: {\r\n    align: [\"full\"]\r\n    // Becuase in theme.json we are setting an 840px width for the layout in the post/page editor, we are overriding that for the banner block so it can take up the full-screen.\r\n  },\r\n  attributes: {\r\n    align: { type: \"string\", default: \"full\" },\r\n    imgID: { type: \"number\" },\r\n    imgURL: { type: \"string\", default: banner.fallbackimage }\r\n    //Sometimes a user may install wp in a sub-folder on their domain, so in some cases if you hardcode a default image location it may not work. \r\n    // banner.fallbackimage was set up in functions.php. We could say window.banner.fallbackimage, but it's implied in this case, which is why we didn't.\r\n  },\r\n  edit: EditComponent,\r\n  save: SaveComponent\r\n})\r\n\r\nfunction EditComponent(props) {\r\n  // apiFetch is used to retreive data. In this case, we are using it to get the data regarding the image id.\r\n  // note that we didn't have to include the base part of our url in the path, but if you want to view it in the browser then you would.\r\n  useEffect(\r\n    function () {\r\n      if (props.attributes.imgID) {\r\n        async function go() {\r\n          const response = await apiFetch({\r\n            path: `/wp/v2/media/${props.attributes.imgID}`,\r\n            method: \"GET\"\r\n          })\r\n        // We are targeting pageBanner's source_url as pageBanner is our custom image size for a banner that was set up in functions.php. \r\n          props.setAttributes({ imgURL: response.media_details.sizes.pageBanner.source_url })\r\n        }\r\n        go()\r\n      }\r\n    },\r\n    [props.attributes.imgID] \r\n    // this will trigger everytime the imgID is changed.\r\n  )\r\n\r\n  function onFileSelect(x) {\r\n    props.setAttributes({ imgID: x.id })\r\n  } //Becuase our custom pageBanner image size (added in functions.php) is not avialble in the x object (it only has standard sizes) we are just going to get the id of the image selected.\r\n\r\n  return (\r\n    <>\r\n      <InspectorControls>\r\n        <PanelBody title=\"Background\" initialOpen={true}>\r\n          <PanelRow>\r\n            {/* MediaUploadCheck will see if the current logged-in user has permissions to upload media. */}\r\n            <MediaUploadCheck>\r\n              {/* Render= returns JSX that will appear in the right sidebar panel. In this case, a button will display. When the button is clicked, it will show the typical media upload screen. -- you can choose a pre-existing image or upload.\r\n              After the user clicks the select button after highlighting the image, onSelect will trigger.*/}\r\n              <MediaUpload\r\n                onSelect={onFileSelect}\r\n                value={props.attributes.imgID}\r\n                render={({ open }) => {\r\n                  return <Button onClick={open}>Choose Image</Button>\r\n                }}\r\n              />\r\n            </MediaUploadCheck>\r\n          </PanelRow>\r\n        </PanelBody>\r\n      </InspectorControls>\r\n      <div className=\"page-banner\">\r\n        <div className=\"page-banner__bg-image\" style={{ backgroundImage: `url('${props.attributes.imgURL}')` }}></div>\r\n        <div className=\"page-banner__content container t-center c-white\">\r\n          <InnerBlocks allowedBlocks={[\"ourblocktheme/genericheading\", \"ourblocktheme/genericbutton\"]} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\n// For this component we are now using banner.php for the save function. So the js save function only should save the content itself. (aka the string of text is coming from Innerblocks.Content) -- This is saved in the database for this post. So now the HTML will come from the php file and only the text content is saved to the database for each post this is added to.\r\nfunction SaveComponent() {\r\n  return <InnerBlocks.Content />\r\n}\r\n"],"names":["apiFetch","Button","PanelBody","PanelRow","InnerBlocks","InspectorControls","MediaUpload","MediaUploadCheck","registerBlockType","useEffect","title","supports","align","attributes","type","default","imgID","imgURL","banner","fallbackimage","edit","EditComponent","save","SaveComponent","props","go","response","path","method","setAttributes","media_details","sizes","pageBanner","source_url","onFileSelect","x","id","createElement","Fragment","initialOpen","onSelect","value","render","_ref","open","onClick","className","style","backgroundImage","allowedBlocks","Content"],"sourceRoot":""}